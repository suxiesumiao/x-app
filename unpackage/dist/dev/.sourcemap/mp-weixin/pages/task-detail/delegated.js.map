{"version":3,"sources":["uni-app:///main.js","webpack:////Applications/ Gitee/hayner-app-new/pages/task-detail/delegated.vue?b8ee","webpack:////Applications/ Gitee/hayner-app-new/pages/task-detail/delegated.vue?89cb","webpack:////Applications/ Gitee/hayner-app-new/pages/task-detail/delegated.vue?a247","webpack:////Applications/ Gitee/hayner-app-new/pages/task-detail/delegated.vue?846c","uni-app:///pages/task-detail/delegated.vue","webpack:////Applications/ Gitee/hayner-app-new/pages/task-detail/delegated.vue?e225","webpack:////Applications/ Gitee/hayner-app-new/pages/task-detail/delegated.vue?54d3"],"names":["createPage","Page"],"mappings":"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","file":"pages/task-detail/delegated.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/task-detail/delegated.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./delegated.vue?vue&type=template&id=3b81a940&scoped=true&\"\nvar renderjs\nimport script from \"./delegated.vue?vue&type=script&lang=js&\"\nexport * from \"./delegated.vue?vue&type=script&lang=js&\"\nimport style0 from \"./delegated.vue?vue&type=style&index=0&id=3b81a940&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3b81a940\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/task-detail/delegated.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./delegated.vue?vue&type=template&id=3b81a940&scoped=true&\"","var components\ntry {\n  components = {\n    uNavbar: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-navbar/u-navbar\" */ \"@/uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    uSteps: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-steps/u-steps\" */ \"@/uview-ui/components/u-steps/u-steps.vue\"\n      )\n    },\n    nnkjcDetailGroup: function() {\n      return import(\n        /* webpackChunkName: \"components/nnkjc-detail-group/nnkjc-detail-group\" */ \"@/components/nnkjc-detail-group/nnkjc-detail-group.vue\"\n      )\n    },\n    nnkjcDetailItem: function() {\n      return import(\n        /* webpackChunkName: \"components/nnkjc-detail-item/nnkjc-detail-item\" */ \"@/components/nnkjc-detail-item/nnkjc-detail-item.vue\"\n      )\n    },\n    uButton: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-button/u-button\" */ \"@/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uEmpty: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-empty/u-empty\" */ \"@/uview-ui/components/u-empty/u-empty.vue\"\n      )\n    },\n    uModal: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-modal/u-modal\" */ \"@/uview-ui/components/u-modal/u-modal.vue\"\n      )\n    },\n    uSelect: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-select/u-select\" */ \"@/uview-ui/components/u-select/u-select.vue\"\n      )\n    },\n    uToast: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-toast/u-toast\" */ \"@/uview-ui/components/u-toast/u-toast.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.showModal = true\n    }\n\n    _vm.e1 = function($event) {\n      return _vm.$u.debounce(_vm.confirmRefuse, 500)\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./delegated.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./delegated.vue?vue&type=script&lang=js&\"","<!-- 本页面属于 维修单详情的 委派状态 status === 20 || 30 -->\n<template>\n  <view class=\"task-detail padding-bottom-normal\">\n    <u-navbar\n        isFixed\n        :borderBottom=\"false\"\n        backIconName=\"arrow-leftward\"\n        titleSize=\"34\"\n        :customBack=\"back\"\n        :background=\"background\"\n        title=\"维修单详情\"></u-navbar>\n    <view class=\"margin-normal bg-white padding-normal radius-normal\" @click=\"foMaintProcess\">\n      <u-steps mode=\"number\" :active-color=\"'#24A27C'\" :list=\"numList\" :current=\"current\"></u-steps>\n    </view>\n\n    <view v-if=\"detail && !empty\">\n      <view>\n        <nnkjc-detail-group>\n          <nnkjc-detail-item\n              detailTitle=\"工单编号\"\n              :detailContent=\"detail.seqNo\"\n              :align=\"'left'\"\n          >\n          </nnkjc-detail-item>\n\n          <nnkjc-detail-item\n              detailTitle=\"创建时间\"\n              :detailContent=\"detail.createTime\"\n              :align=\"'left'\"\n          >\n          </nnkjc-detail-item>\n\n          <nnkjc-detail-item\n              detailTitle=\"最近更新\"\n              :detailContent=\"detail.updateTime\"\n              :align=\"'left'\"\n          >\n          </nnkjc-detail-item>\n\n          <nnkjc-detail-item\n              detailTitle=\"当前状态\"\n              :detailContent=\"detail.statusText\"\n              :align=\"'left'\"\n              :gap=\"false\"\n          >\n          </nnkjc-detail-item>\n\n        </nnkjc-detail-group>\n\n        <nnkjc-detail-group>\n          <nnkjc-detail-item\n              detailTitle=\"故障原因\"\n              :detailContent=\"detail.content\"\n              :align=\"'left'\"\n          >\n          </nnkjc-detail-item>\n        </nnkjc-detail-group>\n        <nnkjc-detail-group>\n          <nnkjc-detail-item\n              detailTitle=\"维修人\"\n              :detailContent=\"detail.maintStaffName\"\n              :align=\"'left'\"\n              :gap=\"false\"\n          >\n          </nnkjc-detail-item>\n        </nnkjc-detail-group>\n      </view>\n\n      <!--      确认接单-->\n      <view>\n        <view v-show=\"showBtn1\" class=\"save-tasks-inner-wrapper margin-normal radius-normal\">\n          <u-button ripple type=\"success\" :loading=\"loadingConfirm\" @click=\"confirmReceive\">确认接单</u-button>\n        </view>\n\n        <view v-show=\"showBtn2\" class=\"save-tasks-inner-wrapper margin-normal radius-normal\">\n          <u-button ripple :loading=\"loadingRefuse\" type=\"error\" plain @click=\"showModal = true\">\n            <text style=\"color: #ff3534;\">拒绝</text>\n          </u-button>\n        </view>\n      </view>\n\n      <view>\n        <view v-show=\"showBtn3\" class=\"save-tasks-inner-wrapper margin-normal radius-normal\">\n          <u-button ripple type=\"success\" :loading=\"loading\" @click=\"reDelegatePerson\">重新委派</u-button>\n        </view>\n      </view>\n\n      <view>\n        <view v-show=\"showBtn4\" class=\"save-tasks-inner-wrapper margin-normal radius-normal\">\n          <u-button ripple type=\"success\" :loading=\"loading\" @click=\"forMakeMaintRecord\">填写维修记录</u-button>\n        </view>\n      </view>\n\n      <view>\n        <view v-show=\"showBtn5\" class=\"save-tasks-inner-wrapper margin-normal radius-normal\">\n          <u-button class=\"plain anti-success\" ripple :loading=\"loading\" @click=\"transDelegatePerson\">\n            <text style=\"color: #23a27b;\">转派他人处理</text>\n          </u-button>\n        </view>\n      </view>\n    </view>\n\n    <u-empty :show=\"empty\" text=\"暂无任务详情\" mode=\"history\"></u-empty>\n\n    <u-modal v-model=\"showModal\" @confirm=\"$u.debounce(confirmRefuse, 500)\" show-cancel-button content=\"确认拒绝该工单？\"></u-modal>\n\n<!--    重新委派-->\n    <u-select\n        title=\"选择维修人\"\n        :default-value=\"personDefaultV\"\n        mode=\"single-column\"\n        v-model=\"showPerson\"\n        @confirm=\"personConfirm\"\n        @cancel=\"personCancel\"\n        :list=\"personList\"></u-select>\n    <u-toast ref=\"uToast\"/>\n\n<!--    转派-->\n\n    <u-select\n        title=\"选择维修人\"\n        :default-value=\"personDefaultV\"\n        mode=\"single-column\"\n        v-model=\"showPersonTrans\"\n        @confirm=\"personConfirmTrans\"\n        @cancel=\"personCancel\"\n        :list=\"personList\"></u-select>\n    <u-toast ref=\"uToast\"/>\n  </view>\n</template>\n\n<script>\n  export default {\n    name: \"task-detail-delegated\",\n    data() {\n      return {\n        personIdIndexMap: {},\n        showPerson: false,\n        showPersonTrans: false,\n        personDefaultV: [0],\n        personList: [],\n        showBtn1: false,  //  确认接单\n        showBtn2: false,  //  拒单\n        showBtn3: false,  //  重新委派\n        showBtn4: false,  //  填写维修记录\n        showBtn5: false,  //  转单\n        showModal: false,\n        loading: false,\n        loadingRefuse: false,\n        loadingConfirm: false,\n        empty: false,\n        detail: {\n          seqNo: \"\",\n          createTime: \"\",\n          updateTime: \"\",\n          statusText: \"\"\n        },\n        background: {\n          'background': '#f2f2f8'\n        },\n        current: 1,\n        numList: [{\n          name: '新建'\n        }, {\n          name: '委派'\n        }, {\n          name: '维修'\n        }, {\n          name: '检定'\n        },],\n        searchParams: {\n          id: \"\",\n          status: \"\",\n          type: \"\"\n        }\n      }\n    },\n    computed: {\n      PREMISS() {\n        return this.$store.state.PREMISS\n      }\n    },\n    onLoad(options) {\n      this.searchParams.id = options.taskId\n      this.searchParams.status = options.status\n      this.searchParams.type = options.type\n    },\n    onReady() {\n      this.getDetail();\n    },\n    onShow() {\n      this.getPersons();\n    },\n    methods: {\n      getPersons() {\n        this.$u\n            .post(\"/sys/staff/getStaffListForWexiu\")\n            .then(res => {\n              if (res.data) {\n                this.personList = res.data.map((person, index) => {\n                  this.personIdIndexMap[person.id] = index;\n                  return {\n                    value: person.id,\n                    label: person.staffName\n                  }\n                })\n              }\n            })\n            .catch(err => {\n            });\n      },\n      //  重新委派\n      personConfirm(v) {\n        const user = uni.getStorageSync(\"user\");\n        if(user && user.staffId === v[0].value) {\n          this.$refs.uToast.show({\n            title: \"不能派单给自己\",\n            type: \"warning\"\n          });\n          return;\n        }\n        this.personDefaultV = [this.personIdIndexMap[v[0].value] || 0];\n        this.$u.post(\"maint/saveSend\", {\n          taskId: this.searchParams.id || this.detail.id,\n          type: this.searchParams.type,\n          maintStaffIds: v[0].value\n        }).then(res => {\n          if (res.code === 200) {\n            this.$store.commit(\"freshTaskFunc\", true);\n            this.$refs.uToast.show({\n              title: res.message,\n              type: \"success\"\n            });\n            setTimeout(() => {\n              uni.navigateTo({\n                url: \"/pages/home/index\"\n              }, 500)\n            })\n          }\n        }).catch(e => {\n\n        }).finally(_ => {\n          this.showPerson = false;\n        })\n      },\n      //  转派\n      personConfirmTrans(v) {\n        console.log(v);\n        const user = uni.getStorageSync(\"user\");\n        if(user && user.staffId === v[0].value) {\n          this.$refs.uToast.show({\n            title: \"不能转单给自己\",\n            type: \"warning\"\n          });\n          return;\n        }\n        this.personDefaultV = [this.personIdIndexMap[v[0].value] || 0];\n        this.$u.post(\"maint/transSend\", {\n          taskId: this.searchParams.id || this.detail.id,\n          sendId: this.detail.sendId,\n          maintStaffId: v[0].value\n        }).then(res => {\n          if (res.code === 200) {\n            this.$store.commit(\"freshTaskFunc\", true);\n            this.$refs.uToast.show({\n              title: res.message,\n              type: \"success\"\n            });\n            setTimeout(() => {\n              uni.navigateTo({\n                url: \"/pages/home/index\"\n              }, 500)\n            })\n          }\n        }).catch(e => {\n\n        }).finally(_ => {\n          this.showPerson = false;\n        })\n      },\n      personCancel() {\n        this.showPerson = false;\n        this.showPersonTrans = false;\n      },\n      back() {\n        uni.navigateBack({\n          delta: 1\n        })\n      },\n      //  确认接单\n      confirmReceive() {\n        this.loadingConfirm = true;\n        this.$u\n            .post(\"maint/recSend\", {\n              taskId: this.searchParams.id,\n              sendId: this.detail.sendId,\n              type: this.searchParams.type\n            }).then(res => {\n          if (res.code === 200) {\n            this.$refs.uToast.show({\n              title: \"接单成功\",\n              type: \"success\"\n            });\n            setTimeout(() => {\n              uni.reLaunch({\n                url: \"/pages/home/index\"\n              });\n            }, 500)\n          }\n        }).catch(e => {\n\n        }).finally(_ => {\n          this.loadingConfirm = false;\n        })\n      },\n      //  拒单操作\n      //  工单拒单（仅限维修工单和巡查工单）\n      confirmRefuse() {\n        if(this.loadingRefuse) {\n          return\n        }\n        if (this.searchParams.type === \"weixiu\") {\n          this.loadingRefuse = true;\n          this.$u\n              .post(\"/maint/refuseSend\", {\n                taskId: this.detail.id,\n                sendId: this.detail.sendId,\n                type: this.searchParams.type\n              })\n              .then(res => {\n                if (res.code === 200) {\n                  this.$store.commit(\"freshTaskFunc\", true);\n                  this.$refs.uToast.show({\n                    title: res.message,\n                    type: \"success\"\n                  });\n                  setTimeout(() => {\n                    uni.reLaunch({\n                      url: \"/pages/home/index\"\n                    }, 500)\n                  })\n                }\n              })\n              .catch(err => {\n              }).finally(_ => {\n            this.loadingRefuse = false;\n          })\n        } else {\n          this.$refs.uToast.show({\n            title: \"仅能拒绝维修工单以及巡查工单\",\n            type: \"warning\"\n          });\n        }\n      },\n      foMaintProcess() {\n        const params = this.$u.queryParams({\n          taskId: this.searchParams.id,\n        })\n\n        uni.navigateTo({\n          url: \"/pages/maint-process/index\" + params\n        })\n      },\n      getDetail() {\n        this.$u\n            .post(\"/maint/getWeixiuTaskDetail\", this.searchParams)\n            .then(res => {\n              if (res.data) {\n                const user = uni.getStorageSync(\"user\")\n                const premissObj = uni.getStorageSync(\"premissObj\")\n                this.detail = res.data;\n                if (this.detail) {\n\n                  const rightStaff = user && user.staffId === this.detail.maintStaffId\n\n                  const rightStatus1 = this.searchParams.status == \"20\";\n                  const rightStatus2 = this.searchParams.status == \"30\";\n\n                  //  状态是 20 && 有接单的权限 && staffID 一致 (见详情)\n                  this.showBtn1 = !!(rightStatus1 && premissObj && premissObj[this.PREMISS.reveive] && rightStaff)\n\n                  //  状态是 20 && 有拒绝的权限 && staffID 一致 (见详情)\n                  this.showBtn2 = !!(rightStatus1 && premissObj && premissObj[this.PREMISS.refuse] && rightStaff)\n\n                  //  状态是 20 && 有重新委派的权限 && staffID 一致 (见详情)\n                  this.showBtn3 = !!(rightStatus1 && premissObj && premissObj[this.PREMISS.reDelegate])\n\n                  //  状态是 30 && 有填写维修记录的权限 && staffID 一致 (见详情)\n                  this.showBtn4 = !!(rightStatus2 && premissObj && premissObj[this.PREMISS.saveMaintRecord] && rightStaff)\n\n                  //  状态是 30 && 有转派的权限 && staffID 一致 (见详情)\n                  this.showBtn5 = !!(rightStatus2 && premissObj && premissObj[this.PREMISS.trans] && rightStaff)\n\n                  const res = [{\n                    \"表单状态\": this.detail.status,\n                    \"表单 mstaffId\": this.detail.maintStaffId,\n                    \"用户 staffId\": user.staffId,\n                    \"表单类型\": this.detail.type,\n                    \"修改pm\": premissObj[this.PREMISS.modifyreason],\n                    \"取消pm\": premissObj[this.PREMISS.delitem],\n                    \"委派pm\": premissObj[this.PREMISS.delegate],\n                    \"重新委派pm\": premissObj[this.PREMISS.reDelegate],\n                    \"接单pm\": premissObj[this.PREMISS.reveive],\n                    \"拒单pm\": premissObj[this.PREMISS.refuse],\n                    \"转单pm\": premissObj[this.PREMISS.trans],\n                    \"填写维修记录pm\": premissObj[this.PREMISS.saveMaintRecord],\n                  }];\n\n                  console.table(res);\n                }\n              } else {\n                this.empty = true;\n              }\n            })\n            .catch(err => {\n            });\n      },\n      reDelegatePerson() {\n        this.showPerson = true;\n      },\n      transDelegatePerson() {\n        this.showPersonTrans = true;\n      },\n      forMakeMaintRecord() {\n        const params = this.$u.queryParams({\n          taskId: this.detail.id,\n          sendId: this.detail.sendId\n        });\n\n        uni.navigateTo({\n          url: \"/pages/make-maint-record/index\" + params\n        })\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .u-btn--error--plain {\n    background-color: #f2f2f8 !important;\n  }\n</style>","import mod from \"-!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./delegated.vue?vue&type=style&index=0&id=3b81a940&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./delegated.vue?vue&type=style&index=0&id=3b81a940&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1621060967667\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}