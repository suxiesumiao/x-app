{"version":3,"sources":["uni-app:///main.js","webpack:////Applications/ Gitee/hayner-app-new/pages/make-maint-record/index.vue?de73","webpack:////Applications/ Gitee/hayner-app-new/pages/make-maint-record/index.vue?f04a","webpack:////Applications/ Gitee/hayner-app-new/pages/make-maint-record/index.vue?396a","webpack:////Applications/ Gitee/hayner-app-new/pages/make-maint-record/index.vue?b03b","uni-app:///pages/make-maint-record/index.vue","webpack:////Applications/ Gitee/hayner-app-new/pages/make-maint-record/index.vue?bccf","webpack:////Applications/ Gitee/hayner-app-new/pages/make-maint-record/index.vue?779a"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,yG;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AAC0L;AAC1L,gBAAgB,oMAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,mNAEN;AACP,KAAK;AACL;AACA,aAAa,oPAEN;AACP,KAAK;AACL;AACA,aAAa,8OAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,6MAEN;AACP,KAAK;AACL;AACA,aAAa,iMAEN;AACP,KAAK;AACL;AACA,aAAa,iMAEN;AACP,KAAK;AACL;AACA,aAAa,mQAEN;AACP,KAAK;AACL;AACA,aAAa,uMAEN;AACP,KAAK;AACL;AACA,aAAa,sNAEN;AACP,KAAK;AACL;AACA,aAAa,yQAEN;AACP,KAAK;AACL;AACA,aAAa,6MAEN;AACP,KAAK;AACL;AACA,aAAa,mNAEN;AACP,KAAK;AACL;AACA,aAAa,6MAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvGA;AAAA;AAAA;AAAA;AAAqtB,CAAgB,kuBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0PzuB,kF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA,EACA,yBADA,EAEA,IAFA,kBAEA,CACA,SACA,eADA,EAEA,iBAFA,EAGA,cAHA,EAGA;AACA,oBAJA,EAKA,YALA,EAMA,qDANA,EAOA,UACA,kCADA,EAPA,EAUA,YACA,uBADA,EAVA,EAaA,YAbA,EAcA,eAdA,EAeA,aACA,EACA,YADA,EAEA,SAFA,EADA,EAKA,EACA,aADA,EAEA,SAFA,EALA,CAfA,EAyBA,aACA,UADA,EAEA,WAFA,EAzBA,EA6BA,cACA,WADA,EAEA,QAFA,EAGA,QAHA,EAIA,aAJA,EAKA,cALA,EA7BA,EAoCA,QACA,UADA,EAEA,UAFA,EAGA,cAHA,EAIA,WAJA,EAKA,eALA,EAMA,eANA,EAOA,QAPA,EAQA,WARA,EASA,YATA,EApCA,EA+CA,WACA,EACA,aADA,EAEA,SAFA,EADA,EAKA,EACA,cADA,EAEA,SAFA,EALA,CA/CA,EAyDA,WACA,YADA,EAEA,WAFA,EAzDA,EA6DA,gBACA,EACA,WADA,EAEA,UAFA,EADA,EAKA,EACA,WADA,EAEA,WAFA,EALA,CA7DA,EAuEA,gBACA,QADA,EAEA,SAFA,EAvEA,EA2EA,cACA,uBADA,EA3EA,GA+EA,CAlFA,EAmFA,MAnFA,kBAmFA,OAnFA,EAmFA,CACA,kCACA,kCACA,CAtFA,EAuFA,MAvFA,oBAuFA,CACA,oBADA,CACA;AACA,GAzFA,EA0FA,WACA,UADA,sBACA,CADA,EACA,CACA,CAFA,EAGA,UAHA,wBAGA,CACA,CAJA,EAKA,YALA,0BAKA,CACA,CANA,EAOA,IAPA,kBAOA,CACA,mBACA,QADA,IAGA,CAXA,EAYA,SAZA,qBAYA,IAZA,EAYA,KAZA,EAYA,KAZA,EAYA,IAZA,EAYA,CACA,qCACA,8BACA,CACA,CAhBA,EAiBA,QAjBA,oBAiBA,KAjBA,EAiBA,KAjBA,EAiBA,IAjBA,EAiBA,CACA,+BACA,CAnBA,EAoBA;AACA,gBArBA,0BAqBA,kBACA,QACA,IADA,CACA,qBADA,EACA,EACA,wBADA,EADA,EAGA,IAHA,CAGA,gBACA,mCACA,qBACA,0BACA,+CACA,sBACA,2BACA,MADA,CACA,gBACA,aACA,CAHA,EAGA,GAHA,CAGA,gBACA,2CACA,CALA,CADA,CAOA,CARA,EASA,wCACA,0CACA,0CACA,4CACA,CACA,iCACA,2CACA,2CACA,iDACA,gDACA,CACA,CAvBA,MAuBA,CACA,sBACA,CACA,CA9BA,EA+BA,CArDA,EAsDA,UAtDA,wBAsDA,mBACA,2BACA,6CACA,CACA,6CACA,oBACA,QACA,IADA,CACA,wBADA,EACA,SADA,EAEA,IAFA,CAEA,gBACA,iBACA,uBACA,2BACA,kBADA,EAEA,eAFA,IAIA,wBACA,eACA,wBADA,IAGA,CAJA,EAIA,GAJA,EAKA,CACA,CAfA,EAeA,KAfA,CAeA,cACA,CAhBA,EAgBA,OAhBA,CAgBA,cACA,uBACA,CAlBA,EAmBA,CA/EA,EAgFA,YAhFA,wBAgFA,EAhFA,EAgFA,mBACA,oBACA,QACA,IADA,CACA,iBADA,EACA,EACA,MADA,EAEA,wBAFA,EADA,EAIA,IAJA,CAIA,gBACA,uBACA,2BACA,kBADA,EAEA,eAFA,IAIA,sBACA,CACA,CAZA,EAYA,KAZA,CAYA,cAEA,CAdA,EAcA,OAdA,CAcA,cACA,uBACA,CAhBA,EAiBA,CAnGA,EAoGA;AACA,kBArGA,0BAqGA,MArGA,EAqGA,KArGA,EAqGA,CACA,mBACA,YADA,EAEA,cAFA,EAGA,6BACA,CAJA,EAKA,uBACA,gBACA,eADA,EAEA,YAFA,IAIA,CAVA,IAYA,CAlHA,EAmHA,YAnHA,0BAmHA,CACA,mCACA,wBADA,EAEA,wBAFA,IAIA,iBACA,kCADA,IAGA,CA3HA,EA4HA,OA5HA,qBA4HA,CACA,iBACA,eACA,gCACA,oCACA,kCAFA,CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,2BACA,0CADA,CAEA;AACA;AACA;AACA;AACA;AACA,qBACA,GADA,CACA,KADA,EAEA,IAFA,CAEA,gBACA,eACA,4DACA,sCACA,sCACA,gDACA,kDACA,CANA,MAMA,CACA,CACA,CAXA,EAYA,KAZA,CAYA,gBACA,iBACA,CAdA,EAeA,CACA,CAtCA,EAuCA,uBACA,0BACA,cADA,EAEA,eAFA,IAIA,CA5CA,IA8CA,CA5KA,EA1FA,E;;;;;;;;;;;;;AC5PA;AAAA;AAAA;AAAA;AAA80C,CAAgB,gyCAAG,EAAC,C;;;;;;;;;;;ACAl2C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/make-maint-record/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/make-maint-record/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=527ded9c&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=527ded9c&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"527ded9c\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/make-maint-record/index.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=527ded9c&scoped=true&\"","var components\ntry {\n  components = {\n    uNavbar: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-navbar/u-navbar\" */ \"@/uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    nnkjcDetailGroup: function() {\n      return import(\n        /* webpackChunkName: \"components/nnkjc-detail-group/nnkjc-detail-group\" */ \"@/components/nnkjc-detail-group/nnkjc-detail-group.vue\"\n      )\n    },\n    nnkjcDetailItem: function() {\n      return import(\n        /* webpackChunkName: \"components/nnkjc-detail-item/nnkjc-detail-item\" */ \"@/components/nnkjc-detail-item/nnkjc-detail-item.vue\"\n      )\n    },\n    uRadioGroup: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-radio-group/u-radio-group\" */ \"@/uview-ui/components/u-radio-group/u-radio-group.vue\"\n      )\n    },\n    uRadio: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-radio/u-radio\" */ \"@/uview-ui/components/u-radio/u-radio.vue\"\n      )\n    },\n    uRow: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-row/u-row\" */ \"@/uview-ui/components/u-row/u-row.vue\"\n      )\n    },\n    uCol: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-col/u-col\" */ \"@/uview-ui/components/u-col/u-col.vue\"\n      )\n    },\n    uInput: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-input/u-input\" */ \"@/uview-ui/components/u-input/u-input.vue\"\n      )\n    },\n    uIcon: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-icon/u-icon\" */ \"@/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    commonHeader: function() {\n      return import(\n        /* webpackChunkName: \"components/common-header/common-header\" */ \"@/components/common-header/common-header.vue\"\n      )\n    },\n    uUpload: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-upload/u-upload\" */ \"@/uview-ui/components/u-upload/u-upload.vue\"\n      )\n    },\n    uImage: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-image/u-image\" */ \"@/uview-ui/components/u-image/u-image.vue\"\n      )\n    },\n    uButton: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-button/u-button\" */ \"@/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uToast: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-toast/u-toast\" */ \"@/uview-ui/components/u-toast/u-toast.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      return _vm.$u.debounce(_vm.submitForm, 500)\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"make-maint-record padding-bottom-normal\">\n    <u-navbar\n        isFixed\n        :borderBottom=\"false\"\n        backIconName=\"arrow-leftward\"\n        titleSize=\"34\"\n        :customBack=\"back\"\n        :background=\"background\"\n        title=\"维修记录表\"></u-navbar>\n    <view>\n      <nnkjc-detail-group>\n        <nnkjc-detail-item\n            detailTitle=\"维修类型\"\n            :align=\"'left'\"\n            :gap=\"false\"\n        >\n          <view slot=\"content\">\n            <view v-if=\"!mainted\">\n              <u-radio-group @change=\"typeChange\" v-model=\"form.assetFlag\">\n                <u-radio\n                    :label-size=\"'14px'\"\n                    :active-color=\"'#24a27c'\"\n                    v-for=\"(type, index) in typeList\" :key=\"type.name\"\n                    :name=\"type.name\"\n                >\n                  {{type.title}}\n                </u-radio>\n              </u-radio-group>\n            </view>\n            <view v-else>\n              <text>\n                <text>{{ typeMap[form.assetFlag] }}</text>\n              </text>\n            </view>\n          </view>\n        </nnkjc-detail-item>\n      </nnkjc-detail-group>\n\n      <view v-if=\"form.assetFlag === '1'\">\n        <nnkjc-detail-group>\n          <nnkjc-detail-item\n              detailTitle=\"设备编号\"\n              :align=\"'left'\"\n          >\n            <view slot=\"content\">\n              <u-row gutter=\"12\" :justify=\"'space-between'\">\n                <u-col span=\"11\">\n                  <u-input v-model=\"assetAbout.code\" disabled placeholder=\"填写设备编号\" type=\"text\" :border=\"false\"/>\n                </u-col>\n                <u-col span=\"1\" @click=\"scanner\" v-if=\"!mainted\">\n                  <u-icon name=\"scan\"></u-icon>\n                </u-col>\n              </u-row>\n            </view>\n          </nnkjc-detail-item>\n          <nnkjc-detail-item\n              detailTitle=\"设备名称\"\n              :align=\"'left'\"\n          >\n            <view slot=\"content\">\n              <u-input v-model=\"assetAbout.name\" disabled placeholder=\"填写设备名称\" type=\"text\" :border=\"false\"/>\n            </view>\n          </nnkjc-detail-item>\n          <nnkjc-detail-item\n              detailTitle=\"规格型号\"\n              :align=\"'left'\"\n          >\n            <view slot=\"content\">\n              <u-input v-model=\"assetAbout.modelName\" disabled placeholder=\"填写规格型号\" type=\"text\" :border=\"false\"/>\n            </view>\n          </nnkjc-detail-item>\n          <nnkjc-detail-item\n              detailTitle=\"设备房\"\n              :align=\"'left'\"\n              :gap=\"false\"\n          >\n            <view slot=\"content\">\n              <u-input v-model=\"assetAbout.installPos\" disabled placeholder=\"填写设备房\" type=\"text\" :border=\"false\"/>\n            </view>\n          </nnkjc-detail-item>\n        </nnkjc-detail-group>\n      </view>\n\n      <nnkjc-detail-group>\n        <nnkjc-detail-item\n            detailTitle=\"维修处理\"\n            :align=\"'left'\"\n            :gap=\"false\"\n        >\n          <view slot=\"content\">\n            <view v-if=\"!mainted\">\n              <u-radio-group v-model=\"form.maintType\">\n                <u-radio\n                    @change=\"dealChange\"\n                    :label-size=\"'14px'\"\n                    :active-color=\"'#24a27c'\"\n                    v-for=\"(type, index) in maintTypeList\"\n                    :key=\"type.name\"\n                    :name=\"type.name\"\n                >\n                  {{type.title}}\n                </u-radio>\n              </u-radio-group>\n            </view>\n            <view v-else>\n              <text>{{ maintTypeMap[form.maintType] }}</text>\n            </view>\n          </view>\n        </nnkjc-detail-item>\n      </nnkjc-detail-group>\n\n      <view class=\"margin-normal\">\n        <common-header :title=\"'维修日志'\">\n          <view slot=\"operation\" v-if=\"mainted && form.finishFlag === '0'\">\n            <view class=\"add-new\" @tap.stop=\"addNewRecord\">\n              <u-icon name=\"edit-pen-fill\"></u-icon>\n              添加\n            </view>\n          </view>\n        </common-header>\n      </view>\n\n      <view v-if=\"!mainted\">\n        <nnkjc-detail-group>\n          <nnkjc-detail-item\n              detailTitle=\"维修日志\"\n              :align=\"'left'\"\n              :gap=\"false\"\n          >\n            <view slot=\"content\">\n              <u-input type=\"textarea\"\n                       :height=\"200\"\n                       :maxlength=\"500\"\n                       placeholder=\"请填写维修过程以及安全措施\"\n                       placeholder-style=\"color: #D4D4D5; line-height: 1; font-size: 14px;\"\n                       v-model=\"form.content\"/>\n            </view>\n          </nnkjc-detail-item>\n\n          <view style=\"padding-bottom: 10px; border-bottom: 1px solid #f1f1f1;\">\n            <u-upload\n                width=\"100\"\n                height=\"100\"\n                uploadText=\"\"\n                :action=\"action\"\n                customBtn\n                @on-success=\"onSuccess\"\n                @on-remove=\"onRemove\"\n                :header=\"header\"\n                :form-data=\"formData\"\n                :file-list=\"fileList\">\n              <view class=\"add-btn\" slot=\"addBtn\">\n                <u-icon name=\"camera-fill\"></u-icon>\n              </view>\n            </u-upload>\n          </view>\n\n          <nnkjc-detail-item\n              detailTitle=\"维修结果\"\n              :align=\"'left'\"\n              :gap=\"false\"\n          >\n            <view slot=\"content\">\n              <u-radio-group v-model=\"form.finishFlag\">\n                <u-radio\n                    @change=\"resultChange\"\n                    :label-size=\"'14px'\"\n                    :active-color=\"'#24a27c'\"\n                    v-for=\"(res, index) in resultList\" :key=\"res.name\"\n                    :name=\"res.name\"\n                >\n                  {{res.title}}\n                </u-radio>\n              </u-radio-group>\n            </view>\n          </nnkjc-detail-item>\n        </nnkjc-detail-group>\n      </view>\n      <view v-if=\"mainted && maintRecord.length\">\n        <nnkjc-detail-group v-for=\"(record, index) in maintRecord\" :key=\"record.id\">\n          <nnkjc-detail-item\n              detailTitle=\"维修日志\"\n              :align=\"'left'\"\n              :gap=\"false\"\n          >\n            <view slot=\"content\">\n              <text>{{ record.content }}</text>\n            </view>\n          </nnkjc-detail-item>\n\n          <view style=\"padding-bottom: 10px; border-bottom: 1px solid #f1f1f1;\">\n            <u-row gutter=\"12\">\n              <u-col span=\"2\" v-for=\"(image, index_) in record.maintPicReal\" :key=\"index_\">\n                <u-image\n                    @click=\"doPreviewImage(record.maintPicReal, index_)\"\n                    width=\"50px\"\n                    height=\"50px\"\n                    border-radius=\"6\"\n                    :src=\"image\"></u-image>\n              </u-col>\n            </u-row>\n          </view>\n\n          <nnkjc-detail-item\n              detailTitle=\"维修时间\"\n              :align=\"'left'\"\n          >\n            <view slot=\"content\">\n              <text>{{ record.maintTime }}</text>\n            </view>\n          </nnkjc-detail-item>\n\n          <nnkjc-detail-item\n              detailTitle=\"维修人\"\n              :align=\"'left'\"\n          >\n            <view slot=\"content\">\n              <text>{{ record.maintStaffName }}</text>\n            </view>\n          </nnkjc-detail-item>\n\n          <view>\n            <u-button\n                v-if=\"mainted && form.finishFlag === '0'\"\n                class=\"bg-white\"\n                ripple\n                plain\n                @click=\"deleteRecord(record.id)\">\n              <text style=\"color: #fa3534;\">删除</text>\n            </u-button>\n          </view>\n        </nnkjc-detail-group>\n      </view>\n    </view>\n    <view class=\"margin-normal radius-normal\">\n      <u-button\n          v-if=\"!mainted\"\n          ripple\n          type=\"success\"\n          :loading=\"loading\"\n          @click=\"$u.debounce(submitForm, 500)\">确认提交\n      </u-button>\n    </view>\n\n    <u-toast ref=\"uToast\"/>\n  </view>\n</template>\n\n<script>\n  import CONFIG from \"../../config\";\n\n  export default {\n    name: \"make-maint-record\",\n    data() {\n      return {\n        maintRecord: [],\n        maintStaffMap: {},\n        mainted: false,  //  是否已经维修过\n        loading: false,\n        imageUrl: [],\n        action: CONFIG.baseUrl + \"/maint/uploadFile\",\n        header: {\n          token: uni.getStorageSync(\"token\"),\n        },\n        formData: {\n          fileKey: \"maint-record\",\n        },\n        fileList: [],\n        valueResult: \"\",\n        resultList: [\n          {\n            title: \"未完成\",\n            name: \"0\"\n          },\n          {\n            title: \"维修完成\",\n            name: \"1\"\n          }\n        ],\n        resultMap: {\n          \"0\": \"未完成\",\n          \"1\": \"维修完成\"\n        },\n        assetAbout: {\n          assetId: \"\",\n          name: \"\",\n          code: \"\",\n          modelName: \"\",\n          installPos: \"\"\n        },\n        form: {\n          taskId: \"\",\n          sendId: \"\",\n          assetFlag: \"1\",\n          assetId: \"\",\n          maintType: \"in\",\n          finishFlag: \"0\",\n          code: \"\",\n          content: \"\",\n          maintPic: \"\",\n        },\n        typeList: [\n          {\n            title: \"资产维修\",\n            name: \"1\"\n          },\n          {\n            title: \"非资产维修\",\n            name: \"0\"\n          }\n        ],\n        typeMap: {\n          \"0\": \"非资产维修\",\n          \"1\": \"资产维修\"\n        },\n        maintTypeList: [\n          {\n            title: \"自理\",\n            name: \"in\"\n          },\n          {\n            title: \"外委\",\n            name: \"out\"\n          }\n        ],\n        maintTypeMap: {\n          in: \"自理\",\n          out: \"外委\"\n        },\n        background: {\n          'background': '#f2f2f8'\n        }\n      }\n    },\n    onLoad(options) {\n      this.form.taskId = options.taskId;\n      this.form.sendId = options.sendId;\n    },\n    onShow() {\n      this.getMaintList();//  获取维修记录\n    },\n    methods: {\n      typeChange(v) {\n      },\n      dealChange() {\n      },\n      resultChange() {\n      },\n      back() {\n        uni.navigateBack({\n          delta: 1\n        })\n      },\n      onSuccess(data, index, lists, name) {\n        if (data.code === 200 && data.data) {\n          this.imageUrl.push(data.data);\n        }\n      },\n      onRemove(index, lists, name) {\n        this.imageUrl.splice(index, 1);\n      },\n      //  获取维修的详情\n      getMaintList() {\n        this.$u\n            .post('/maint/getMaintList', {\n              taskId: this.form.taskId\n            }).then(res => {\n          if (res.code === 200 && res.data) {\n            this.mainted = true;\n            if (res.data.recordList) {\n              res.data.recordList.forEach(record => {\n                record.maintPicReal =\n                    record.maintPic.split(',')\n                        .filter((pic) => {\n                          return !!(pic);\n                        }).map(pic => {\n                  return CONFIG.baseUrl + '/' + pic;\n                })\n              })\n              this.maintRecord = res.data.recordList;\n              this.form.assetFlag= res.data.assetFlag;\n              this.form.maintType = res.data.maintType;\n              this.form.finishFlag = res.data.finishFlag;\n            }\n            if(res.data.assetFlag === '1') {\n              this.assetAbout.code = res.data.assetCode;\n              this.assetAbout.name = res.data.assetName;\n              this.assetAbout.modelName = res.data.assetModel;\n              this.assetAbout.installPos = res.data.assetPos;\n            }\n          } else {\n            this.mainted = false;\n          }\n        })\n      },\n      submitForm() {\n        if(this.imageUrl.length) {\n          this.form.maintPic = this.imageUrl.join(',');\n        }\n        const finalForm = Object.assign({}, this.form);\n        this.loading = true;\n        this.$u\n            .post('/maint/saveMaintRecord', finalForm)\n            .then(res => {\n              console.log(res);\n              if (res.code === 200) {\n                this.$refs.uToast.show({\n                  title: res.message,\n                  type: 'success'\n                });\n                setTimeout(() => {\n                  uni.reLaunch({\n                    url: '/pages/home/index'\n                  })\n                }, 300)\n              }\n            }).catch(e => {\n        }).finally(_ => {\n          this.loading = false;\n        })\n      },\n      deleteRecord(id) {\n        this.loading = true;\n        this.$u\n            .post('/maint/delMaint', {\n              id,\n              taskId: this.form.taskId\n            }).then(res => {\n              if(res.code === 200) {\n                this.$refs.uToast.show({\n                  title: res.message,\n                  type: 'success'\n                });\n                this.getMaintList();\n              }\n        }).catch(e => {\n\n        }).finally(_ => {\n          this.loading = false;\n        })\n      },\n      //  图片预览\n      doPreviewImage(images, index) {\n        uni.previewImage({\n          urls: images,\n          current: index,\n          success: () => {\n          },\n          fail: () => {\n            uni.showToast({\n              title: '预览图片失败',\n              icon: 'none'\n            });\n          }\n        });\n      },\n      addNewRecord() {\n        const params = this.$u.queryParams({\n          taskId: this.form.taskId,\n          sendId: this.form.sendId\n        });\n        uni.navigateTo({\n          url: \"./new-maint-record\" + params\n        })\n      },\n      scanner() {\n        const this_ = this;\n        uni.scanCode({\n          success: function (res) {\n            console.log(\"条码类型：\" + res.scanType);\n            console.log(\"条码内容：\" + res.result);\n\n            // let queryStr = res.result.split('?')[1]\n            // const queryObj = {};\n            // let split = queryStr.split('&');\n            // if(split.length) {\n            //   for(let i = 0; i < split.length; i++) {\n            //     let item = split[i].split('=')\n            //     queryObj[item[0]] = item[1]\n            //   }\n            // }\n\n            if(res.result) {\n              const query = res.result.split('mobile')[1]\n              // if (query) {\n              //   uni.navigateTo({\n              //     url: \"/pages/asset-detail/index?\" + query\n              //   })\n              // }\n              this_.$u\n                  .get(query)\n                  .then(res => {\n                    if (res.data) {\n                      this_.assetAbout.assetId = this_.form.assetId = res.data.id;\n                      this_.assetAbout.code = res.data.code;\n                      this_.assetAbout.name = res.data.name;\n                      this_.assetAbout.modelName = res.data.modelName;\n                      this_.assetAbout.installPos = res.data.installPos;\n                    } else {\n                    }\n                  })\n                  .catch(err => {\n                    console.log(err);\n                  });\n            }\n          },\n          fail: function () {\n            this_.$refs.uToast.show({\n              title: \"扫描失败~\",\n              type: \"warning\"\n            });\n          }\n        });\n      },\n    }\n  }\n</script>\n\n<style scoped lang=\"scss\">\n  .add-btn {\n    margin-top: 10px;\n    width: 50px;\n    height: 50px;\n    border-radius: 5px;\n    border: 1px dashed #f1f1f1;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .add-new {\n    height: 20px;\n    font-size: 14px;\n    font-weight: 400;\n    line-height: 12px;\n    color: #409eff;\n  }\n\n  .u-btn--error--plain {\n    background-color: #ffffff !important;\n  }\n</style>","import mod from \"-!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=527ded9c&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=527ded9c&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1621060969126\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}