{"version":3,"sources":["uni-app:///main.js","webpack:////Applications/ Gitee/hayner-app-new/pages/keepup-detail/delegated.vue?4ef4","webpack:////Applications/ Gitee/hayner-app-new/pages/keepup-detail/delegated.vue?0ac5","webpack:////Applications/ Gitee/hayner-app-new/pages/keepup-detail/delegated.vue?94ba","webpack:////Applications/ Gitee/hayner-app-new/pages/keepup-detail/delegated.vue?8707","uni-app:///pages/keepup-detail/delegated.vue","webpack:////Applications/ Gitee/hayner-app-new/pages/keepup-detail/delegated.vue?4c80","webpack:////Applications/ Gitee/hayner-app-new/pages/keepup-detail/delegated.vue?f04c"],"names":["createPage","Page"],"mappings":"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","file":"pages/keepup-detail/delegated.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/keepup-detail/delegated.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./delegated.vue?vue&type=template&id=351df725&scoped=true&\"\nvar renderjs\nimport script from \"./delegated.vue?vue&type=script&lang=js&\"\nexport * from \"./delegated.vue?vue&type=script&lang=js&\"\nimport style0 from \"./delegated.vue?vue&type=style&index=0&id=351df725&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"351df725\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/keepup-detail/delegated.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./delegated.vue?vue&type=template&id=351df725&scoped=true&\"","var components\ntry {\n  components = {\n    uNavbar: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-navbar/u-navbar\" */ \"@/uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    uSteps: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-steps/u-steps\" */ \"@/uview-ui/components/u-steps/u-steps.vue\"\n      )\n    },\n    nnkjcDetailGroup: function() {\n      return import(\n        /* webpackChunkName: \"components/nnkjc-detail-group/nnkjc-detail-group\" */ \"@/components/nnkjc-detail-group/nnkjc-detail-group.vue\"\n      )\n    },\n    nnkjcDetailItem: function() {\n      return import(\n        /* webpackChunkName: \"components/nnkjc-detail-item/nnkjc-detail-item\" */ \"@/components/nnkjc-detail-item/nnkjc-detail-item.vue\"\n      )\n    },\n    uButton: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-button/u-button\" */ \"@/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uEmpty: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-empty/u-empty\" */ \"@/uview-ui/components/u-empty/u-empty.vue\"\n      )\n    },\n    uSelect: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-select/u-select\" */ \"@/uview-ui/components/u-select/u-select.vue\"\n      )\n    },\n    uIcon: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-icon/u-icon\" */ \"@/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uToast: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-toast/u-toast\" */ \"@/uview-ui/components/u-toast/u-toast.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.personList, function(person, index) {\n    var $orig = _vm.__get_orig(person)\n\n    var g0 = _vm.selectedPerson.indexOf(person.value)\n    return {\n      $orig: $orig,\n      g0: g0\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./delegated.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./delegated.vue?vue&type=script&lang=js&\"","<!-- 本页面属于 保养单详情的 委派状态 status === 20 || 30 -->\n<template>\n  <view class=\"task-detail padding-bottom-normal\">\n    <u-navbar\n        isFixed\n        :borderBottom=\"false\"\n        backIconName=\"arrow-leftward\"\n        titleSize=\"34\"\n        :customBack=\"back\"\n        :background=\"background\"\n        title=\"保养单详情\"></u-navbar>\n    <view class=\"margin-normal bg-white padding-normal radius-normal\" @click=\"foMaintProcess\">\n      <u-steps mode=\"number\" :active-color=\"'#24A27C'\" :list=\"numList\" :current=\"current\"></u-steps>\n    </view>\n\n    <view v-if=\"detail && !empty\">\n      <view>\n        <nnkjc-detail-group>\n          <nnkjc-detail-item\n              detailTitle=\"工单编号\"\n              :detailContent=\"detail.seqNo\"\n              :align=\"'left'\"\n          >\n          </nnkjc-detail-item>\n\n          <nnkjc-detail-item\n              detailTitle=\"创建时间\"\n              :detailContent=\"detail.createTime\"\n              :align=\"'left'\"\n          >\n          </nnkjc-detail-item>\n\n          <nnkjc-detail-item\n              detailTitle=\"最近更新\"\n              :detailContent=\"detail.updateTime\"\n              :align=\"'left'\"\n          >\n          </nnkjc-detail-item>\n\n          <nnkjc-detail-item\n              detailTitle=\"当前状态\"\n              :detailContent=\"detail.statusText\"\n              :align=\"'left'\"\n              :gap=\"false\"\n          >\n          </nnkjc-detail-item>\n\n        </nnkjc-detail-group>\n\n        <nnkjc-detail-group>\n          <nnkjc-detail-item\n              detailTitle=\"巡查地点\"\n              :detailContent=\"'配电机房'\"\n              :align=\"'left'\"\n          >\n          </nnkjc-detail-item>\n          <nnkjc-detail-item\n              detailTitle=\"保养时间\"\n              :detailContent=\"detail.cycleTypeText\"\n              :align=\"'left'\"\n          >\n          </nnkjc-detail-item>\n          <nnkjc-detail-item\n              detailTitle=\"保养内容\"\n              :align=\"'left'\"\n          >\n            <view slot=\"content\" style=\"line-height: 1.5;\">\n              <view v-for=\"(item, index) in detailContent\" :key=\"index\">\n                {{ item }}\n              </view>\n            </view>\n          </nnkjc-detail-item>\n          <nnkjc-detail-item\n              detailTitle=\"抄表人\"\n              :detailContent=\"detail.maintStaffNames\"\n              :align=\"'left'\"\n              :gap=\"false\"\n          >\n          </nnkjc-detail-item>\n        </nnkjc-detail-group>\n      </view>\n\n      <!--      确认接单-->\n      <view>\n        <view v-show=\"showBtn1\" class=\"save-tasks-inner-wrapper margin-normal radius-normal\">\n          <u-button ripple type=\"success\" :loading=\"loadingConfirm\" @click=\"confirmReceive\">确认接单</u-button>\n        </view>\n\n      </view>\n\n      <view>\n        <view v-show=\"showBtn3\" class=\"save-tasks-inner-wrapper margin-normal radius-normal\">\n          <u-button ripple type=\"success\" :loading=\"loading\" @click=\"reDelegatePerson\">重新委派</u-button>\n        </view>\n      </view>\n\n      <view>\n        <view v-show=\"showBtn4\" class=\"save-tasks-inner-wrapper margin-normal radius-normal\">\n          <u-button ripple type=\"success\" :loading=\"loading\" @click=\"forMakePatrolRecord\">填写保养记录</u-button>\n        </view>\n      </view>\n\n      <view>\n      </view>\n    </view>\n\n    <u-empty :show=\"empty\" text=\"暂无任务详情\" mode=\"history\"></u-empty>\n\n    <!--    重新委派-->\n    <u-select\n        title=\"选择责任人\"\n        :default-value=\"personDefaultV\"\n        mode=\"single-column\"\n        v-model=\"showPerson\"\n        @confirm=\"personConfirm\"\n        @cancel=\"personCancel\"\n        custom>\n      <view class=\"select-person-custom-wrapper\" slot=\"custom\">\n        <scroll-view :scroll-top=\"scrollTop\" style=\"height: 100%;\" scroll-y=\"true\" class=\"scroll-Y\">\n          <view class=\"select-person-custom\">\n            <view class=\"item\" @click=\"toggleSelect(person.value)\" v-for=\"(person, index) in personList\" :key=\"index\">\n              <text>{{ person.label }}</text>\n              <view class=\"select-item\" :class=\"{checked: selectedPerson.indexOf(person.value) !== -1}\">\n                <u-icon name=\"checkmark\" color=\"#f5f5f5\"></u-icon>\n              </view>\n            </view>\n          </view>\n        </scroll-view>\n      </view>\n    </u-select>\n    <u-toast ref=\"uToast\"/>\n  </view>\n</template>\n\n<script>\n  import CONFIG from \"../../config\";\n\n  export default {\n    name: \"patrol-detail-delegated\",\n    data() {\n      return {\n        scrollTop: 0,\n        selectedPerson: [],\n        personIdIndexMap: {},\n        showPerson: false,\n        showPersonTrans: false,\n        personDefaultV: [0],\n        personList: [],\n        showBtn1: false,  //  确认接单\n        showBtn3: false,  //  重新委派\n        showBtn4: false,  //  填写维修记录\n        loading: false,\n        loadingRefuse: false,\n        loadingConfirm: false,\n        empty: false,\n        detail: {\n          seqNo: \"\",\n          createTime: \"\",\n          updateTime: \"\",\n          content: \"\",\n          statusText: \"\"\n        },\n        background: {\n          'background': '#f2f2f8'\n        },\n        current: 1,\n        numList: [{\n          name: '新建'\n        }, {\n          name: '委派'\n        }, {\n          name: '维修'\n        }, {\n          name: '检定'\n        },],\n        searchParams: {\n          id: \"\",\n          status: \"\",\n          type: \"\"\n        }\n      }\n    },\n    computed: {\n      PREMISS() {\n        return this.$store.state.PREMISS\n      },\n      detailContent() {\n        if(this.detail.content) {\n          return this.detail.content.split('\\n')\n        } else {\n          return []\n        }\n      }\n    },\n    onLoad(options) {\n      this.searchParams.id = options.taskId\n      this.searchParams.status = options.status\n      this.searchParams.type = options.type\n    },\n    onReady() {\n      this.getDetail();\n    },\n    onShow() {\n      this.getPersons();\n    },\n    methods: {\n      getPersons() {\n        this.$u\n            .post(\"/sys/staff/getStaffListForWexiu\")\n            .then(res => {\n              if (res.data) {\n                this.personList = res.data.map((person, index) => {\n                  this.personIdIndexMap[person.id] = index;\n                  return {\n                    value: person.id,\n                    label: person.staffName\n                  }\n                })\n              }\n            })\n            .catch(err => {\n            });\n      },\n      //  重新委派\n      personConfirm() {\n        if(!this.selectedPerson.length) {\n          this.$refs.uToast.show({\n            title: \"请选择责任人\",\n            type: \"warning\"\n          });\n          return;\n        }\n        // const user = uni.getStorageSync(\"user\");\n        // if (user && user.staffId === v[0].value) {\n        //   this.$refs.uToast.show({\n        //     title: \"不能派单给自己\",\n        //     type: \"warning\"\n        //   });\n        //   return;\n        // }\n        // this.personDefaultV = [this.personIdIndexMap[v[0].value] || 0];\n        this.$u.post(\"maint/saveSend\", {\n          taskId: this.searchParams.id || this.detail.id,\n          type: this.searchParams.type,\n          maintStaffIds: this.selectedPerson.join(',')\n        }).then(res => {\n          if (res.code === 200) {\n            this.$store.commit(\"freshTaskFunc\", true);\n            this.$refs.uToast.show({\n              title: res.message,\n              type: \"success\"\n            });\n            setTimeout(() => {\n              uni.reLaunch({\n                url: \"/pages/home/index\"\n              }, 500)\n            })\n          }\n        }).catch(e => {\n\n        }).finally(_ => {\n          this.showPerson = false;\n        })\n      },\n      personCancel() {\n        this.showPerson = false;\n        this.showPersonTrans = false;\n      },\n      back() {\n        uni.navigateBack({\n          delta: 1\n        })\n      },\n      //  确认接单\n      confirmReceive() {\n        this.loadingConfirm = true;\n        this.$u\n            .post(\"maint/recSend\", {\n              taskId: this.searchParams.id,\n              sendId: this.detail.sendId,\n              type: this.searchParams.type\n            }).then(res => {\n          if (res.code === 200) {\n            this.$refs.uToast.show({\n              title: \"接单成功\",\n              type: \"success\"\n            });\n            setTimeout(() => {\n              uni.reLaunch({\n                url: \"/pages/home/index\"\n              });\n            }, 500)\n          }\n        }).catch(e => {\n\n        }).finally(_ => {\n          this.loadingConfirm = false;\n        })\n      },\n      foMaintProcess() {\n        const params = this.$u.queryParams({\n          taskId: this.searchParams.id,\n        })\n\n        uni.navigateTo({\n          url: \"/pages/maint-process/index\" + params\n        })\n      },\n      getDetail() {\n        this.$u\n            .post(\"/maint/getBaoyangTaskDetail\", this.searchParams)\n            .then(res => {\n              if (res.data) {\n                const user = uni.getStorageSync(\"user\")\n                const premissObj = uni.getStorageSync(\"premissObj\")\n                this.detail = res.data;\n                if (this.detail) {\n                  this.detail.cycleTypeText = CONFIG.CYCLE_MAP[this.detail.cycleType];\n\n                  //  用户的 staffid 与 表单的抄表人一致（涉及到多个抄表人）\n                  let rightStaff = false;\n                  if(this.detail.maintStaffIds) {\n                    this.selectedPerson = this.detail.maintStaffIds.split(',');\n                    if(user && user.staffId) {\n                      rightStaff = this.selectedPerson.indexOf(user.staffId) !== -1;\n                    }\n                  }\n\n                  const rightStatus1 = this.searchParams.status == \"20\";\n                  const rightStatus2 = this.searchParams.status == \"30\";\n\n                  //  状态是 20 && 有接单的权限 && staffID 一致 (见详情)\n                  this.showBtn1 = !!(rightStatus1 && premissObj && premissObj[this.PREMISS.reveive] && rightStaff)\n\n\n                  //  状态是 20 && 有重新委派的权限 && staffID 一致 (见详情)\n                  this.showBtn3 = !!(rightStatus1 && premissObj && premissObj[this.PREMISS.reDelegate])\n\n                  //  状态是 30 && 有填写保养记录的权限 && staffID 一致 (见详情)\n                  this.showBtn4 = !!(rightStatus2 && premissObj && premissObj[this.PREMISS.saveMaintRecord] && rightStaff)\n\n                  const res = [{\n                    \"表单状态\": this.detail.status,\n                    \"抄表人 id\": this.detail.maintStaffIds,\n                    \"用户 staffId\": user.staffId,\n                    \"表单类型\": this.detail.type,\n                    \"修改pm\": premissObj[this.PREMISS.modifyreason],\n                    \"取消pm\": premissObj[this.PREMISS.delitem],\n                    \"重新委派pm\": premissObj[this.PREMISS.reDelegate],\n                    \"接单pm\": premissObj[this.PREMISS.reveive],\n                    \"填写维修记录pm\": premissObj[this.PREMISS.saveMaintRecord],\n                  }];\n                  console.table(res);\n                }\n              } else {\n                this.empty = true;\n              }\n            })\n            .catch(err => {\n            });\n      },\n      reDelegatePerson() {\n        this.showPerson = true;\n      },\n      forMakePatrolRecord() {\n        const params = this.$u.queryParams({\n          taskId: this.detail.id,\n          sendId: this.detail.sendId\n        });\n\n        uni.navigateTo({\n          url: \"/pages/make-keepup-record/index\" + params\n        })\n      },\n      //  选择多个责任人\n      toggleSelect(v) {\n        const index = this.selectedPerson.indexOf(v);\n        if(index === -1) {\n          this.selectedPerson.push(v);\n        } else {\n          if(this.selectedPerson.length === 1) {\n            this.$refs.uToast.show({\n              title: \"至少选择一个责任人\",\n              type: \"warning\"\n            });\n            return\n          }\n          this.selectedPerson.splice(index, 1);\n        }\n      }\n    }\n  }\n</script>\n\n<style scoped lang=\"scss\">\n  .u-btn--error--plain {\n    background-color: #f2f2f8 !important;\n  }\n  .select-person-custom-wrapper {\n    height: 100%;\n    padding-bottom: 20px;\n  }\n  .select-person-custom {\n    height: 100%;\n    padding: 12px 0;\n    & > .item {\n      font-size: 14px;\n      line-height: 26px;\n      border-top: 1px solid #f5f5f5;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 5px 20px;\n      & > .select-item {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n        border: 1px solid #ebeef5;\n        &.checked {\n          background-color: #24a27c;\n        }\n      }\n    }\n  }\n</style>","import mod from \"-!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./delegated.vue?vue&type=style&index=0&id=351df725&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./delegated.vue?vue&type=style&index=0&id=351df725&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1621060968984\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}