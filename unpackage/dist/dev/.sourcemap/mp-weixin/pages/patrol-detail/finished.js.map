{"version":3,"sources":["uni-app:///main.js","webpack:////Applications/ Gitee/hayner-app-new/pages/patrol-detail/finished.vue?cdc3","webpack:////Applications/ Gitee/hayner-app-new/pages/patrol-detail/finished.vue?acbf","webpack:////Applications/ Gitee/hayner-app-new/pages/patrol-detail/finished.vue?56ae","webpack:////Applications/ Gitee/hayner-app-new/pages/patrol-detail/finished.vue?54f2","uni-app:///pages/patrol-detail/finished.vue"],"names":["createPage","Page"],"mappings":"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","file":"pages/patrol-detail/finished.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/patrol-detail/finished.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./finished.vue?vue&type=template&id=d9dfc1b0&scoped=true&\"\nvar renderjs\nimport script from \"./finished.vue?vue&type=script&lang=js&\"\nexport * from \"./finished.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d9dfc1b0\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/patrol-detail/finished.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./finished.vue?vue&type=template&id=d9dfc1b0&scoped=true&\"","var components\ntry {\n  components = {\n    uNavbar: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-navbar/u-navbar\" */ \"@/uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    uSteps: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-steps/u-steps\" */ \"@/uview-ui/components/u-steps/u-steps.vue\"\n      )\n    },\n    nnkjcDetailGroup: function() {\n      return import(\n        /* webpackChunkName: \"components/nnkjc-detail-group/nnkjc-detail-group\" */ \"@/components/nnkjc-detail-group/nnkjc-detail-group.vue\"\n      )\n    },\n    nnkjcDetailItem: function() {\n      return import(\n        /* webpackChunkName: \"components/nnkjc-detail-item/nnkjc-detail-item\" */ \"@/components/nnkjc-detail-item/nnkjc-detail-item.vue\"\n      )\n    },\n    uButton: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-button/u-button\" */ \"@/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uEmpty: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-empty/u-empty\" */ \"@/uview-ui/components/u-empty/u-empty.vue\"\n      )\n    },\n    uToast: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-toast/u-toast\" */ \"@/uview-ui/components/u-toast/u-toast.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./finished.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./finished.vue?vue&type=script&lang=js&\"","<!-- 本页面属于 巡查单详情的 维修状态 status === 50 -->\n<template>\n  <view class=\"finished padding-bottom-normal\">\n    <u-navbar\n        isFixed\n        :borderBottom=\"false\"\n        backIconName=\"arrow-leftward\"\n        titleSize=\"34\"\n        :customBack=\"back\"\n        :background=\"background\"\n        title=\"巡查单详情\"></u-navbar>\n\n    <view class=\"margin-normal bg-white padding-normal radius-normal\" @click=\"foMaintProcess\">\n      <u-steps mode=\"number\" :active-color=\"'#24A27C'\" :list=\"numList\" :current=\"current\"></u-steps>\n    </view>\n\n    <view v-if=\"detail && !empty\">\n      <view>\n        <nnkjc-detail-group>\n          <nnkjc-detail-item\n              detailTitle=\"工单编号\"\n              :detailContent=\"detail.seqNo\"\n              :align=\"'left'\"\n          >\n          </nnkjc-detail-item>\n\n          <nnkjc-detail-item\n              detailTitle=\"创建时间\"\n              :detailContent=\"detail.createTime\"\n              :align=\"'left'\"\n          >\n          </nnkjc-detail-item>\n\n          <nnkjc-detail-item\n              detailTitle=\"最近更新\"\n              :detailContent=\"detail.updateTime\"\n              :align=\"'left'\"\n          >\n          </nnkjc-detail-item>\n\n          <nnkjc-detail-item\n              detailTitle=\"当前状态\"\n              :detailContent=\"detail.statusText\"\n              :align=\"'left'\"\n              :gap=\"false\"\n          >\n          </nnkjc-detail-item>\n\n        </nnkjc-detail-group>\n\n        <nnkjc-detail-group>\n          <nnkjc-detail-item\n              detailTitle=\"巡查地点\"\n              :detailContent=\"'配电机房'\"\n              :align=\"'left'\"\n          >\n          </nnkjc-detail-item>\n          <nnkjc-detail-item\n              detailTitle=\"巡查内容\"\n              :detailContent=\"detail.content\"\n              :align=\"'left'\"\n          >\n          </nnkjc-detail-item>\n          <nnkjc-detail-item\n              detailTitle=\"抄表人\"\n              :detailContent=\"detail.patrolStaffName\"\n              :align=\"'left'\"\n              :gap=\"false\"\n          >\n          </nnkjc-detail-item>\n        </nnkjc-detail-group>\n      </view>\n\n      <!--      巡查确认 查看巡查记录-->\n      <view>\n        <view v-show=\"showBtn1\" class=\"save-tasks-inner-wrapper margin-normal radius-normal\">\n          <u-button ripple type=\"success\" :loading=\"loading\" @click=\"checkPatrolRecord\">确认</u-button>\n        </view>\n\n        <view v-show=\"showBtn2\" class=\"save-tasks-inner-wrapper margin-normal radius-normal\">\n          <u-button ripple :loading=\"loading\" plain @click=\"forMaintView\">\n            <text style=\"color: #24a27c;\">查看巡查记录</text>\n          </u-button>\n        </view>\n      </view>\n\n      <!--      <view>-->\n      <!--        <view v-show=\"showBtn3\" class=\"save-tasks-inner-wrapper margin-normal\">-->\n      <!--          <u-button ripple type=\"success\" :loading=\"loading\" @click=\"$u.debounce(delegatePerson, 500)\">委派维修人</u-button>-->\n      <!--        </view>-->\n      <!--      </view>-->\n\n    </view>\n\n    <u-empty :show=\"empty\" text=\"暂无任务详情\" mode=\"history\"></u-empty>\n\n    <!--    <u-modal v-model=\"showModal\" @confirm=\"$u.debounce(confirmCalcel, 500)\" show-cancel-button content=\"确认取消工单？\"></u-modal>-->\n\n    <u-toast ref=\"uToast\"/>\n  </view>\n</template>\n\n<script>\n  export default {\n    name: \"finished\",\n    data() {\n      return {\n        loading: false,\n        showBtn1: false,\n        showBtn2: true,\n        background: {\n          'background': '#f2f2f8'\n        },\n        loading: false,\n        empty: false,\n        detail: {\n          seqNo: \"\",\n          createTime: \"\",\n          updateTime: \"\",\n          statusText: \"\"\n        },\n        searchParams: {\n          id: \"\",\n          type: \"\",\n          status: \"\"\n        },\n        numList: [{\n          name: '新建'\n        }, {\n          name: '委派'\n        }, {\n          name: '维修'\n        }, {\n          name: '检定'\n        },],\n        current: 2,\n      }\n    },\n    computed: {\n      PREMISS() {\n        return this.$store.state.PREMISS\n      }\n    },\n    onLoad(options) {\n      this.searchParams.id = options.taskId\n      this.searchParams.status = options.status\n      this.searchParams.type = options.type\n    },\n    onReady() {\n      this.getDetail();\n    },\n    methods: {\n      back() {\n        uni.navigateBack({\n          delta: 1\n        })\n      },\n      getDetail() {\n        this.$u\n            .post(\"/maint/getPatrolDetail\", this.searchParams)\n            .then(res => {\n              if (res.data) {\n                const user = uni.getStorageSync(\"user\")\n\n                const premissObj = uni.getStorageSync(\"premissObj\")\n                this.detail = res.data;\n                if (this.detail) {\n\n\n                  //  状态是 50 && 有修改的权限 && staffID 一致 (见详情)\n                  this.showBtn1 = !!(this.searchParams.status == \"50\" && premissObj && premissObj[this.PREMISS.maintCheck])\n\n                  //  状态是 50 && 有查看记录的权限\n                  this.showBtn2 = !!(this.searchParams.status == \"50\" && premissObj && premissObj[this.PREMISS.viewMaintRecord])\n\n                  const res = [{\n                    \"表单状态\": this.detail.status,\n                    \"表单 mstaffId\": this.detail.maintStaffId,\n                    \"用户 staffId\": user.staffId,\n                    \"表单类型\": this.detail.type,\n                    \"查看记录权限\": premissObj[this.PREMISS.viewMaintRecord],\n                  }];\n\n                  console.table(res);\n                }\n              } else {\n                this.empty = true;\n              }\n            })\n            .catch(err => {\n            });\n      },\n      foMaintProcess() {\n        const params = this.$u.queryParams({\n          taskId: this.searchParams.id,\n        })\n\n        uni.navigateTo({\n          url: \"/pages/maint-process/index\" + params\n        })\n      },\n      forMaintView() {\n        const params = this.$u.queryParams({\n          taskId: this.searchParams.id,\n        })\n\n        uni.navigateTo({\n          url: \"/pages/make-patrol-record/patrol-record-view\" + params\n        })\n      },\n      checkPatrolRecord() {\n        this.$u\n            .post('/maint/verifyTask', {\n              type: this.searchParams.type,\n              id: this.searchParams.id,\n            })\n            .then(res => {\n              if (res.code === 200) {\n                this.$refs.uToast.show({\n                  title: res.message,\n                  type: 'success'\n                });\n                setTimeout(() => {\n                  this.back();\n                }, 300)\n              }\n            }).catch(e => {\n        }).finally(_ => {\n          this.loading = false;\n          this.$store.commit(\"freshTaskFunc\", false);\n        })\n\n        // 直接调用接口 不用跳转页面\n        // const params = this.$u.queryParams({\n        //   taskId: this.searchParams.id,\n        //   type: this.searchParams.type,\n        // })\n        //\n        // uni.navigateTo({\n        //   url: \"/pages/make-maint-record/check-maint-record\" + params\n        // })\n      },\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":""}