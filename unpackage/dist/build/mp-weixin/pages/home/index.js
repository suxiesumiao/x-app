(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/index"],{"06b0":function(t,e,n){},"598a":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(n("c8f6"));function s(t){return t&&t.__esModule?t:{default:t}}function i(t){return c(t)||u(t)||o(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function u(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function c(t){if(Array.isArray(t))return l(t)}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var f={data:function(){return{typeDefaultTitle:"全部类型",typeDefaultV:[0],selectingType:!1,typeList:[{value:"",label:"全部类型"},{value:"weixiu",label:"维修单"},{value:"xuncha",label:"巡查单"},{value:"weihu",label:"保养单"}],statusTagMap:a.default.statusTagMap,empty:!1,taskTitle:"工作台",staticIcon:"../../static/image/home/makeorder.png",taskLists:[],searchParams:{pageNum:1,pageSize:10,type:""},menuListsStatic:[{id:"1",name:"项目信息",href:"",func:"projectInfo",appIcon:"../../static/image/home/home.png"},{id:"2",name:"我的任务",href:"",func:"myTask",appIcon:"../../static/image/home/burger.png"},{id:"3",name:"资产查询",href:"",func:"scanner",appIcon:"../../static/image/home/scan.png"}],userData:{staffName:"",comName:""},headerAvatar:"../../static/image/home/head.png",menuLists:[]}},onLoad:function(t){},onShow:function(){this.getAPPMenuList(),this.getUserData(),this.getTaskListForAll();this.$store.state.freshTask},onReady:function(){},onHide:function(){},onUnload:function(){},onResize:function(){},onPageScroll:function(){},onPullDownRefresh:function(){this.searchParams.pageSize=10,this.searchParams.pageNum=1,this.taskLists=[],this.getTaskListForAll(),t.stopPullDownRefresh()},onReachBottom:function(){this.searchParams.pageNum++,this.getTaskListForAll()},methods:{typeCancel:function(t){this.$refs["type"].selecting=!1},statusEmit:function(t){this.selectingType=t},typeConfirm:function(t){this.$refs["type"].selecting=!1,this.searchParams.pageNum=1,this.searchParams.type=t[0].value,this.typeDefaultTitle=t[0].label;for(var e=0;e<this.typeList.length;e++)if(this.typeList[e].value===t[0].value){this.typeDefaultV=[e];break}this.taskLists=[],this.getTaskListForAll()},forDetailPage:function(e){if(e.status&&e.type&&e.id){var n=this.$u.queryParams({taskId:e.id,status:e.status,type:e.type});t.navigateTo({url:a.default.ROUTE_MAP[e.type][e.status]+n})}},getTaskListForAll:function(){var t=this;1===this.searchParams.pageNum&&(this.taskLists=[]),this.$u.post("/maint/getTaskList",this.searchParams).then((function(e){if(e.data.rows.length>0){for(var n,a=0;a<e.data.rows.length;a++);(n=t.taskLists).push.apply(n,i(e.data.rows))}else t.searchParams.pageNum;t.empty=0===t.taskLists.length})).catch((function(t){console.log(t)}))},forMenuPage:function(e){var n=this;if(e.func)switch(e.func){case"projectInfo":t.navigateTo({url:"./project-info/index"});break;case"myTask":t.navigateTo({url:"./tasks/index"});break;case"scanner":t.scanCode({success:function(e){if(console.log("条码类型："+e.scanType),console.log("条码内容："+e.result),e.result){var n=e.result.split("?")[1];n&&t.navigateTo({url:"/pages/asset-detail/index?"+n})}},fail:function(){n.$refs.uToast.show({title:"扫描失败~",type:"warning"})}});break}else if(e.href)switch(e.href){case"saveTask":t.navigateTo({url:"./save-task/index"});break;case"saveMaintRecord":t.navigateTo({url:"./maint-record/index"});break}},forUserCenter:function(){t.navigateTo({url:"/pages/user/index"})},getUserData:function(){var e=t.getStorageSync("user");e&&(this.userData=e)},getAPPMenuList:function(){var e=this,n=t.getStorageSync("appMenuList");if(n)this.menuLists=this.menuListsStatic.concat(n);else{var a={};this.$u.post("sys/menu/getAPPMenuList",{}).then((function(n){for(var s=[],i=0;i<n.data.length;i++)"1"===n.data[i].appShowFlag&&s.push(n.data[i]),a[n.data[i].id]=!0;e.menuLists=e.menuListsStatic.concat(s),t.setStorageSync("premissObj",a),t.setStorageSync("appMenuList",s)}))}}}};e.default=f}).call(this,n("543d")["default"])},"83e1":function(t,e,n){"use strict";var a=n("06b0"),s=n.n(a);s.a},bcee:function(t,e,n){"use strict";n.r(e);var a=n("598a"),s=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=s.a},d0eb:function(t,e,n){"use strict";n.r(e);var a=n("d4ed"),s=n("bcee");for(var i in s)"default"!==i&&function(t){n.d(e,t,(function(){return s[t]}))}(i);n("83e1");var r,o=n("f0c5"),u=Object(o["a"])(s["default"],a["b"],a["c"],!1,null,"7234a9eb",null,!1,a["a"],r);e["default"]=u.exports},d4ed:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var a={commonHeader:function(){return n.e("components/common-header/common-header").then(n.bind(null,"8cb7"))},commonSelect:function(){return n.e("components/common-select/common-select").then(n.bind(null,"eb4a"))},uSelect:function(){return n.e("uview-ui/components/u-select/u-select").then(n.bind(null,"d67a"))},nnkjcTaskItem:function(){return n.e("components/nnkjc-task-item/nnkjc-task-item").then(n.bind(null,"d24e"))},uToast:function(){return n.e("uview-ui/components/u-toast/u-toast").then(n.bind(null,"0f55"))},uEmpty:function(){return n.e("uview-ui/components/u-empty/u-empty").then(n.bind(null,"2385"))}},s=function(){var t=this,e=t.$createElement;t._self._c},i=[]},f4e0:function(t,e,n){"use strict";(function(t){n("5d15");a(n("66fd"));var e=a(n("d0eb"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])}},[["f4e0","common/runtime","common/vendor"]]]);